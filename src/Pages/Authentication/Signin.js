import React, { useState } from "react";
// import * as Yup from "yup";
// import { useFormik } from "formik";
import Cookies from "js-cookie";
import "../../assets/style/Signin.css";
import axios from "axios";
import logoWhite from "../../assets/images/logo-white.png";
import microsoftLogo from "../../assets/images/microsoft-logo.png";
export default function Signin() {
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  // const validation = useFormik({
  //   enableReinitialize: true,

  //   initialValues: {
  //     email: "",
  //     password: "",
  //   },
  //   validationSchema: Yup.object({
  //     email: Yup.string()
  //       .email("Please enter a valid email address")
  //       .required("Please enter email"),
  //     password: Yup.string().required("Please enter password"),
  //   }),
  //   // onSubmit: (values) => {
  //   //   handleSignIn(values);
  //   // },
  // });

  const handleSignIn = async (e) => {
    e.preventDefault();
    try {
      const apiData = {
        email: email,
        password: password,
      };
      const form = {
        email: email,
        password: password,
      };
      const response = await axios.post(
        `${process.env.REACT_APP_BASE_URL}/user/signup`,
        form
      );
      let role =
        response.data.newUser?.user?.role || response.data.newUser?.role;
      let id = response.data.newUser?.user?._id || response.data.newUser?._id;
      Cookies.set("authToken", id);
      Cookies.set("userData", JSON.stringify(apiData.email));
      Cookies.set("userRole", JSON.stringify(role));
      if (role === "admin") window.location.href = "/admin";
      else window.location.href = "/dashboard";
    } catch (error) {
      console.error("Error logging the user", error);
    }
  };
  return (
    <div className="auth-wrapper">
      <div className="signin">
        <div className="left-wrapper">
          <div className="circle-1">
            <svg
              width="287"
              height="277"
              viewBox="0 0 287 277"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M-41.694 -176.112C-40.1844 -176.757 -38.6667 -177.386 -37.1411 -178H139.141C140.667 -177.386 142.184 -176.757 143.694 -176.112H-41.694Z"
                fill="#00D3C3"
              />
              <path
                d="M-77.1666 -157.232C-76.1832 -157.869 -75.1947 -158.498 -74.2013 -159.12H176.201C177.195 -158.498 178.183 -157.869 179.167 -157.232H-77.1666Z"
                fill="#00D3C3"
              />
              <path
                d="M-100.231 -140.241C-100.98 -139.616 -101.725 -138.987 -102.466 -138.353H204.466C203.725 -138.987 202.98 -139.616 202.231 -140.241H-100.231Z"
                fill="#00D3C3"
              />
              <path
                d="M-122.126 -119.473C-121.539 -120.106 -120.949 -120.735 -120.355 -121.361H222.355C222.949 -120.735 223.539 -120.106 224.126 -119.473H-122.126Z"
                fill="#00D3C3"
              />
              <path
                d="M-136.478 -102.481C-136.959 -101.854 -137.437 -101.225 -137.912 -100.593H0.950714C2.94292 -101.262 4.9529 -101.891 6.97977 -102.481H-136.478Z"
                fill="#00D3C3"
              />
              <path
                d="M95.0203 -102.481C97.0471 -101.891 99.0571 -101.262 101.049 -100.593H239.912C239.437 -101.225 238.959 -101.854 238.479 -102.481H95.0203Z"
                fill="#00D3C3"
              />
              <path
                d="M-34.3006 -83.6017H-149.56C-149.951 -82.9743 -150.339 -82.345 -150.725 -81.7137H-37.1508C-36.208 -82.353 -35.2579 -82.9824 -34.3006 -83.6017Z"
                fill="#00D3C3"
              />
              <path
                d="M139.151 -81.7137C138.208 -82.353 137.258 -82.9824 136.301 -83.6017H251.56C251.951 -82.9743 252.339 -82.345 252.725 -81.7137H139.151Z"
                fill="#00D3C3"
              />
              <path
                d="M-58.1042 -64.722H-160.156C-160.471 -64.0943 -160.783 -63.4649 -161.093 -62.834H-60.0308C-59.394 -63.4688 -58.7518 -64.0981 -58.1042 -64.722Z"
                fill="#00D3C3"
              />
              <path
                d="M162.031 -62.834C161.394 -63.4688 160.752 -64.0981 160.104 -64.722H262.156C262.471 -64.0943 262.783 -63.4649 263.093 -62.834H162.031Z"
                fill="#00D3C3"
              />
              <path
                d="M-74.8095 -45.8423H-168.617C-168.866 -45.2143 -169.112 -44.585 -169.356 -43.9544H-76.2069C-75.7457 -44.5873 -75.2799 -45.2166 -74.8095 -45.8423Z"
                fill="#00D3C3"
              />
              <path
                d="M178.207 -43.9544C177.746 -44.5873 177.28 -45.2166 176.809 -45.8423H270.617C270.866 -45.2143 271.112 -44.585 271.356 -43.9544H178.207Z"
                fill="#00D3C3"
              />
              <path
                d="M-86.9999 -26.9627H-175.179C-175.368 -26.3344 -175.554 -25.7051 -175.738 -25.0747H-88.0193C-87.6837 -25.7066 -87.3439 -26.3359 -86.9999 -26.9627Z"
                fill="#00D3C3"
              />
              <path
                d="M190.019 -25.0747C189.684 -25.7066 189.344 -26.3359 189 -26.9627H277.179C277.368 -26.3344 277.554 -25.7051 277.738 -25.0747H190.019Z"
                fill="#00D3C3"
              />
              <path
                d="M-95.7845 -8.08299H-180.004C-180.137 -7.45459 -180.267 -6.82526 -180.395 -6.19502H-96.5005C-96.2658 -6.82626 -96.0271 -7.4556 -95.7845 -8.08299Z"
                fill="#00D3C3"
              />
              <path
                d="M198.501 -6.19502C198.266 -6.82626 198.027 -7.4556 197.785 -8.08299H282.004C282.137 -7.45459 282.267 -6.82526 282.395 -6.19502H198.501Z"
                fill="#00D3C3"
              />
              <path
                d="M-101.741 10.7967H-183.202C-183.283 11.4252 -183.361 12.0546 -183.436 12.6846H-102.195C-102.047 12.0538 -101.896 11.4245 -101.741 10.7967Z"
                fill="#00D3C3"
              />
              <path
                d="M204.195 12.6846C204.047 12.0538 203.896 11.4245 203.741 10.7967H285.202C285.283 11.4252 285.361 12.0546 285.436 12.6846H204.195Z"
                fill="#00D3C3"
              />
              <path
                d="M-105.195 29.6763H-184.851C-184.881 30.305 -184.908 30.9343 -184.933 31.5643H-105.411C-105.343 30.9339 -105.271 30.3045 -105.195 29.6763Z"
                fill="#00D3C3"
              />
              <path
                d="M207.411 31.5643C207.343 30.9339 207.271 30.3045 207.195 29.6763H286.851C286.881 30.305 286.908 30.9343 286.933 31.5643H207.411Z"
                fill="#00D3C3"
              />
              <path
                d="M-106.333 48.556H-185C-184.98 49.186 -184.958 49.8153 -184.933 50.444H-106.324C-106.33 49.8677 -106.333 49.2906 -106.333 48.7128C-106.333 48.6605 -106.333 48.6083 -106.333 48.556Z"
                fill="#00D3C3"
              />
              <path
                d="M208.324 50.444C208.33 49.8677 208.333 49.2906 208.333 48.7128C208.333 48.6605 208.333 48.6083 208.333 48.556H287C286.994 48.748 286.988 48.9399 286.981 49.1317C286.966 49.5695 286.95 50.0069 286.933 50.444H208.324Z"
                fill="#00D3C3"
              />
              <path
                d="M-105.232 67.4357H-183.654C-183.584 68.0658 -183.511 68.6951 -183.436 69.3236H-104.997C-105.079 68.6955 -105.158 68.0662 -105.232 67.4357Z"
                fill="#00D3C3"
              />
              <path
                d="M206.997 69.3236C207.079 68.6955 207.158 68.0662 207.232 67.4357H285.654C285.584 68.0658 285.511 68.6951 285.436 69.3236H206.997Z"
                fill="#00D3C3"
              />
              <path
                d="M-101.818 86.3154H-180.771C-180.648 86.9456 -180.523 87.5749 -180.395 88.2033H-101.343C-101.505 87.5755 -101.663 86.9462 -101.818 86.3154Z"
                fill="#00D3C3"
              />
              <path
                d="M203.343 88.2033C203.505 87.5755 203.663 86.9462 203.818 86.3154H282.771C282.648 86.9456 282.523 87.5749 282.395 88.2033H203.343Z"
                fill="#00D3C3"
              />
              <path
                d="M-95.9053 105.195H-176.279C-176.101 105.825 -175.921 106.455 -175.738 107.083H-95.1659C-95.4163 106.456 -95.6628 105.826 -95.9053 105.195Z"
                fill="#00D3C3"
              />
              <path
                d="M197.166 107.083C197.416 106.456 197.663 105.826 197.905 105.195H278.279C278.101 105.825 277.921 106.455 277.738 107.083H197.166Z"
                fill="#00D3C3"
              />
              <path
                d="M-87.1715 124.075H-170.075C-169.838 124.705 -169.598 125.335 -169.356 125.963H-86.1241C-86.4774 125.336 -86.8266 124.707 -87.1715 124.075Z"
                fill="#00D3C3"
              />
              <path
                d="M188.124 125.963C188.477 125.336 188.827 124.707 189.172 124.075H272.075C271.838 124.705 271.598 125.335 271.356 125.963H188.124Z"
                fill="#00D3C3"
              />
              <path
                d="M-75.0446 142.954H-162.01C-161.707 143.585 -161.401 144.215 -161.093 144.842H-73.6104C-74.0931 144.217 -74.5712 143.587 -75.0446 142.954Z"
                fill="#00D3C3"
              />
              <path
                d="M175.61 144.842C176.093 144.217 176.571 143.587 177.045 142.954H264.01C263.707 143.585 263.401 144.215 263.093 144.842H175.61Z"
                fill="#00D3C3"
              />
              <path
                d="M-58.4288 161.834H-151.865C-151.487 162.465 -151.107 163.095 -150.725 163.722H-56.4461C-57.1124 163.098 -57.7733 162.469 -58.4288 161.834Z"
                fill="#00D3C3"
              />
              <path
                d="M158.446 163.722C159.112 163.098 159.773 162.469 160.429 161.834H253.865C253.488 162.465 253.107 163.095 252.725 163.722H158.446Z"
                fill="#00D3C3"
              />
              <path
                d="M-34.7834 180.714H-139.316C-138.851 181.345 -138.383 181.975 -137.912 182.602H-31.8162C-32.8127 181.983 -33.8018 181.354 -34.7834 180.714Z"
                fill="#00D3C3"
              />
              <path
                d="M133.816 182.602C134.813 181.983 135.802 181.354 136.783 180.714H241.316C240.851 181.345 240.383 181.975 239.912 182.602H133.816Z"
                fill="#00D3C3"
              />
              <path
                d="M5.91641 199.593H-123.86C-123.286 200.226 -122.708 200.855 -122.126 201.481H12.8069C10.4893 200.903 8.19205 200.273 5.91641 199.593Z"
                fill="#00D3C3"
              />
              <path
                d="M89.1931 201.481C91.5107 200.903 93.808 200.273 96.0836 199.593H225.86C225.286 200.226 224.708 200.855 224.126 201.481H89.1931Z"
                fill="#00D3C3"
              />
              <path
                d="M-102.466 220.361C-103.196 219.736 -103.923 219.107 -104.645 218.473H206.645C205.923 219.107 205.196 219.736 204.466 220.361H-102.466Z"
                fill="#00D3C3"
              />
              <path
                d="M-80.0378 237.353C-79.0856 237.989 -78.1285 238.618 -77.1666 239.241H179.167C180.129 238.618 181.086 237.989 182.038 237.353H-80.0378Z"
                fill="#00D3C3"
              />
              <path
                d="M-41.694 258.12C-43.1352 257.505 -44.5691 256.875 -45.9954 256.232H147.995C146.569 256.875 145.135 257.505 143.694 258.12H-41.694Z"
                fill="#00D3C3"
              />
              <path
                d="M51 277C61.1659 277 71.1817 276.358 81.0091 275.112H20.9909C30.8183 276.358 40.8341 277 51 277Z"
                fill="#00D3C3"
              />
            </svg>
          </div>
          <div className="poster-1">
            <div className="logo">
              <img src={logoWhite} alt="Logo" width={350} />
            </div>
          </div>
          <div className="circle-2">
            <svg
              width="289"
              height="150"
              viewBox="0 0 289 150"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.19917 208.916C0.789704 207.956 0.38994 206.992 -4.10791e-06 206.022L-9.0055e-06 93.9781C0.389935 93.0084 0.789699 92.0438 1.19916 91.0843L1.19917 208.916Z"
                fill="#00D3C3"
              />
              <path
                d="M13.1909 231.462C12.7866 230.837 12.3869 230.209 11.9917 229.577L11.9917 70.4229C12.3869 69.7915 12.7866 69.1632 13.1909 68.5382L13.1909 231.462Z"
                fill="#00D3C3"
              />
              <path
                d="M25.1826 247.542C24.78 247.071 24.3802 246.597 23.9834 246.122L23.9834 53.8784C24.3802 53.4025 24.78 52.9291 25.1826 52.4583L25.1826 247.542Z"
                fill="#00D3C3"
              />
              <path
                d="M37.1743 260.038C36.7725 259.665 36.3728 259.289 35.9751 258.912L35.9751 41.0882C36.3728 40.7107 36.7725 40.3352 37.1743 39.962L37.1743 260.038Z"
                fill="#00D3C3"
              />
              <path
                d="M49.166 270.071C48.7647 269.77 48.365 269.466 47.9668 269.16L47.9668 30.8399C48.3649 30.5342 48.7647 30.2305 49.166 29.9287L49.166 270.071Z"
                fill="#00D3C3"
              />
              <path
                d="M61.1577 278.215C60.7567 277.97 60.357 277.723 59.9585 277.475L59.9585 22.5253C60.357 22.2768 60.7567 22.0301 61.1577 21.7852L61.1577 278.215Z"
                fill="#00D3C3"
              />
              <path
                d="M73.1494 284.805C72.7486 284.608 72.3489 284.409 71.9502 284.209L71.9502 15.7909C72.3489 15.5906 72.7486 15.3919 73.1494 15.195L73.1494 284.805Z"
                fill="#00D3C3"
              />
              <path
                d="M85.1411 290.056C84.7405 289.902 84.3408 289.745 83.9419 289.587L83.9419 10.4129C84.3408 10.2548 84.7405 10.0983 85.1411 9.94348L85.1411 290.056Z"
                fill="#00D3C3"
              />
              <path
                d="M97.1328 294.113C96.7324 293.996 96.3326 293.878 95.9336 293.758L95.9336 6.24194C96.3326 6.12201 96.7323 6.00369 97.1328 5.88699L97.1328 294.113Z"
                fill="#00D3C3"
              />
              <path
                d="M109.124 297.073C108.724 296.992 108.324 296.909 107.925 296.824L107.925 3.1755C108.324 3.09094 108.724 3.00802 109.124 2.92666L109.124 297.073Z"
                fill="#00D3C3"
              />
              <path
                d="M121.116 299.006C120.716 298.958 120.316 298.909 119.917 298.857L119.917 1.14251C120.316 1.09143 120.716 1.04196 121.116 0.994044L121.116 299.006Z"
                fill="#00D3C3"
              />
              <path
                d="M133.108 299.958C132.708 299.942 132.308 299.924 131.909 299.906L131.909 0.0944461C132.308 0.0755557 132.708 0.0582217 133.108 0.0424747L133.108 299.958Z"
                fill="#00D3C3"
              />
              <path
                d="M145.1 299.958C144.7 299.973 144.301 299.987 143.9 300L143.9 -6.29009e-06C144.301 0.0125669 144.7 0.0267576 145.1 0.0424741L145.1 299.958Z"
                fill="#00D3C3"
              />
              <path
                d="M157.091 299.006C156.692 299.054 156.292 299.1 155.892 299.145L155.892 0.85534C156.292 0.900018 156.692 0.946221 157.091 0.994042L157.091 299.006Z"
                fill="#00D3C3"
              />
              <path
                d="M169.083 297.073C168.684 297.154 168.284 297.234 167.884 297.312L167.884 2.68807C168.284 2.76598 168.684 2.84554 169.083 2.92666L169.083 297.073Z"
                fill="#00D3C3"
              />
              <path
                d="M181.075 294.113C180.676 294.229 180.276 294.344 179.876 294.457L179.876 5.54296C180.276 5.656 180.676 5.77068 181.075 5.88699L181.075 294.113Z"
                fill="#00D3C3"
              />
              <path
                d="M193.066 290.056C192.667 290.211 192.268 290.363 191.867 290.514L191.867 9.48598C192.268 9.63683 192.667 9.78933 193.066 9.94347L193.066 290.056Z"
                fill="#00D3C3"
              />
              <path
                d="M205.058 284.805C204.659 285.001 204.26 285.195 203.859 285.388L203.859 14.6124C204.26 14.8049 204.659 14.9991 205.058 15.195L205.058 284.805Z"
                fill="#00D3C3"
              />
              <path
                d="M217.05 278.215C216.651 278.458 216.252 278.7 215.851 278.939L215.851 21.0606C216.252 21.3003 216.651 21.5419 217.05 21.7852L217.05 278.215Z"
                fill="#00D3C3"
              />
              <path
                d="M229.041 270.071C228.643 270.371 228.244 270.668 227.842 270.964L227.842 29.0362C228.244 29.3317 228.643 29.6292 229.041 29.9287L229.041 270.071Z"
                fill="#00D3C3"
              />
              <path
                d="M241.033 260.038C240.635 260.407 240.236 260.775 239.834 261.14L239.834 38.86C240.236 39.2252 240.635 39.5925 241.033 39.962L241.033 260.038Z"
                fill="#00D3C3"
              />
              <path
                d="M253.025 247.542C252.628 248.006 252.228 248.468 251.826 248.927L251.826 51.0728C252.228 51.5322 252.628 51.994 253.025 52.4582L253.025 247.542Z"
                fill="#00D3C3"
              />
              <path
                d="M265.017 231.462C264.621 232.073 264.221 232.681 263.817 233.287L263.817 66.7132C264.221 67.3184 264.621 67.9268 265.017 68.5382L265.017 231.462Z"
                fill="#00D3C3"
              />
              <path
                d="M277.008 208.916C276.617 209.832 276.218 210.743 275.809 211.65L275.809 88.3504C276.218 89.2569 276.617 90.1683 277.008 91.0843L277.008 208.916Z"
                fill="#00D3C3"
              />
              <path
                d="M287.801 130.926C288.592 137.173 289 143.539 289 150C289 156.461 288.592 162.827 287.801 169.074L287.801 130.926Z"
                fill="#00D3C3"
              />
            </svg>
          </div>
        </div>
        <div className="right-wrapper">
          <div className="internal-form">
            <div className="row">
              <div className="col-xl-10 offset-xl-1">
                <div className="head-block">
                  <h4 className="title-form">PR Check Point</h4>
                </div>
                <form className="form" onSubmit={(e) => handleSignIn(e)}>
                  <div className="form-item">
                    <label className="form-label" htmlFor="email">
                      Username
                    </label>
                    <input
                      className="form-input"
                      type="email"
                      name="email"
                      id="email"
                      placeholder="Enter username"
                      value={email}
                      onChange={(e) => setEmail(e.target.value)}
                    />
                  </div>
                  <div className="form-item">
                    <label className="form-label" htmlFor="password">
                      Password
                    </label>
                    <input
                      className="form-input"
                      type="password"
                      name="password"
                      id="password"
                      placeholder="Enter password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                    />
                  </div>
                  <div className="form-item">
                    <button className="form-button" type="submit">
                      Login
                    </button>
                  </div>
                  <button className="btn-microsoft">
                    <img src={microsoftLogo} alt="Logo" width={30} />
                    Login with Microsoft
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
